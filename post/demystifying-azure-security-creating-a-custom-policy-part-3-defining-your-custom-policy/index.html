<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="BloggerCMS" />
    <meta name="description" content="Blog about all things regarding private and public clouds">
    <meta name="author" content="@20aman">

    <title>Demystifying Azure Security - Creating a Custom Policy - Part 3 - Defining your Custom Policy :: Harvesting Clouds</title>

    <!-- rss feed url -->
    <link rel="alternate" type="application/rss+xml" title="Harvesting Clouds" href="http://HarvestingClouds.com/rss.xml"/>

    <!-- favicon -->
    <link rel="shortcut icon" href="/favicon.ico"/>
    <link rel="shortcut icon" href="http://HarvestingClouds.com/favicon.ico"/>

    <!-- Bootstrap CSS file -->
    <link href="http://HarvestingClouds.com/js/plugins/bootstrap-3.0.3/css/cerulean.min.css" rel="stylesheet"/>
    <link href="http://HarvestingClouds.com/js/plugins/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://HarvestingClouds.com/js/plugins/bootstrap-3.0.3/plugins/social-buttons.css" rel="stylesheet"/>

    <!-- syntax highlighter css file -->
    <link href="http://HarvestingClouds.com/js/plugins/highlight/styles/github.css" rel="stylesheet"/>

    <!-- lightbox for images -->
    <link href="http://HarvestingClouds.com/js/plugins/lightbox/ekko-lightbox.min.css" rel="stylesheet"/>

    <!-- blog custom CSS file -->
    <link href="http://HarvestingClouds.com/css/style.css" rel="stylesheet"/>
</head><body>
<!-- Header -->
<header class="navbar navbar-default
 navbar-fixed-top bs-docs-nav" role="banner">
    <div class="container">

        <div class="navbar-header">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a href="http://HarvestingClouds.com" class="navbar-brand">Harvesting Clouds</a>

        </div>


        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
            <div class="navbar-form navbar-right" role="search">
                <div class="form-group">
                    <input type="text" class="searchQuery form-control" placeholder="Search Posts">
                </div>

                <button type="button" class="searchButton btn btn-default"><i class="glyphicon glyphicon-search"></i>
                    Submit
                </button>
            </div>

            <ul class="nav navbar-nav page-links">
                <li><a href="http://HarvestingClouds.com/posts.html">All Posts</a></li>
                    <li><a href="http://HarvestingClouds.com/page/about-me">About Me</a></li>
            </ul>

        </nav>
    </div>
</header>
<div class="container">
    <div class="row">
        <div class="col-md-8 main-content">
            <article>
                <h3>Demystifying Azure Security - Creating a Custom Policy - Part 3 - Defining your Custom Policy</h3>
                <span class="glyphicon glyphicon-user"></span> @20aman
                &nbsp;&nbsp;
                <span class="glyphicon glyphicon-time"></span> Jan 14, 2018
                <hr>

                <p class="post-content"><p>As discussed earlier, the policies provide a way to control what is allowed and what is not allowed in your environment. Earlier we looked at how to view the definition of existing policies and discussed the structure of the policies in detail. Now it's time to put the knowledge together and define a policy.</p>
<h3>Getting the JSON ready for the Policy Definition</h3>
<p>Have the JSON ready for the Policy Definition. If you are going to deploy the policy via Portal then all you need is the Policy Rule portion of the definition. For this post, let's use the sample policy definition for &quot;<em>Only allow a certain VM platform image</em>&quot; located here: <a href="https://docs.microsoft.com/en-us/azure/azure-policy/scripts/allow-certain-vm-image">https://docs.microsoft.com/en-us/azure/azure-policy/scripts/allow-certain-vm-image</a></p>
<p>Various other samples are provided by Microsoft at this link: <a href="https://docs.microsoft.com/en-us/azure/azure-policy/json-samples" target="_blank">Templates for Azure Policy</a></p>
<p>This sample policy, enforces the end users to use only a certain version of the Ubuntu only. </p>
<p>The policy definition looks as below:</p>
<pre><code>{
    "type": "Microsoft.Authorization/policyDefinitions",
    "name": "platform-image-policy",
    "properties": {
        "displayName": "Only allow a certain VM platform image",
        "description": "This policy ensures that only UbuntuServer, Canonical is allowed from the image repository",
        "parameters": {},
        "policyRule": {
            "if": {
                "allOf": [
                    {
                        "field": "type",
                        "in": [
                            "Microsoft.Compute/disks",
                            "Microsoft.Compute/virtualMachines",
                            "Microsoft.Compute/VirtualMachineScaleSets"
                        ]
                    },
                    {
                        "not": {
                            "allOf": [
                                {
                                    "field": "Microsoft.Compute/imagePublisher",
                                    "in": [
                                        "Canonical"
                                    ]
                                },
                                {
                                    "field": "Microsoft.Compute/imageOffer",
                                    "in": [
                                        "UbuntuServer"
                                    ]
                                },
                                {
                                    "field": "Microsoft.Compute/imageSku",
                                    "in": [
                                        "14.04.2-LTS"
                                    ]
                                },
                                {
                                    "field": "Microsoft.Compute/imageVersion",
                                    "in": [
                                        "latest"
                                    ]
                                }
                            ]
                        }
                    }
                ]
            },
            "then": {
                "effect": "deny"
            }
        }
    }
}</code></pre>
<p>Look at the policy rule section. Let's look at various sections more closely.</p>
<ol>
<li><strong><em>if</em></strong> condition defines the policy condition</li>
<li><strong><em>allOf</em></strong> ensures that all the conditions must be true</li>
<li><strong><em>field type</em></strong> is specified as Disks, Virtual Machines and VM scale sets under Microsoft.Compute</li>
<li>Next section defines a nested condition, which evaluates true if actual VM image used is not equal to combination of all of the conditions specified. </li>
<li><strong><em>then</em></strong> section defines what should happen. In this case it says to <strong><em>deny</em></strong> the operation, i.e. the VM provisioning will fail with validation error for not conforming to the policy.</li>
</ol>
<p>Note that there are no parameters used in this policy definition.</p>
<h3>Defining Policy using Portal</h3>
<p>For defining the policies via Azure Portal, navigate to the Policies under settings of your Subscription. Click on the Definitions and then click on &quot;<strong>+Policy Definition</strong>&quot; at the top.</p>
<img src="/images/15218358115ab55f2336e11.png" alt="Defining New Policy">
<p>A new blade will open where you can define the policy. Provide the details as follows:</p>
<ol>
<li>Provide the policy definition's location. This will be your subscription in which you want the definition to exist.</li>
<li>Provide a Display Name and Description of the policy. Try to be as descriptive as possible</li>
<li>Either create a new Category for the policy or use one of the existing ones</li>
<li>
<p>Copy and paste your policy definition. In the portal, only provide the &quot;policyRule&quot; section. The section will look something similar to:</p>
<p>{
&quot;policyRule&quot;: {
&lt;<all content here>&gt;
}
}</p>
</li>
</ol>
<img src="/images/15218358165ab55f28ad5a4.png" alt="New Policy Definition Blade">
<p>Hit <strong>Save</strong> to create the Policy Definition. You can now start assigning this policy in your environment.</p>
<h3>Defining Policy using PowerShell</h3>
<p>Ensure that you have latest version of Azure PowerShell installed. Then using PowerShell to deploy the policy is as easy as executing below two cmdlets:</p>
<ol>
<li><strong><em>New-AzureRmPolicyDefinition</em></strong> - to create the policy definition </li>
<li><strong><em>New-AzureRMPolicyAssignment</em></strong> - to use the policy and assign the policy at a scope defined</li>
</ol>
<p>Store the policy in a json file on your computer. Ensure that you only save the &quot;if-then&quot; condition in curly parenthesis. This will be used as an input to the cmdlet. The file should look similar to below:</p>
<pre><code>{
            "if": { &lt;&lt;content here&gt;&gt;},
            "then":{ &lt;&lt;content here&gt;&gt;}
}</code></pre>
<p>To create the policy definition use a code similar to below. Ensure to update the file name and path as per your environment.</p>
<pre><code>$definition = $definition = New-AzureRmPolicyDefinition -Name "RestrictingUbuntuVMVersion" -DisplayName "Restrict Ubuntu version for VM Deployment" -Description "Detailed Description here" -Policy "C:\temp\CustomPolicyDefinition.json"</code></pre>
<p>To use the policy, do the assignment using a code similar to below:</p>
<pre><code>$assignment = New-AzureRMPolicyAssignment -Name &lt;customAssignmentName&gt; -Scope &lt;SubscriptionId&gt;  -PolicyDefinition $definition</code></pre>
<p>That is all there is to defining and using your custom policy.</p></p>
                <br/><br/>

                <div class="post-info">
                        <span class="glyphicon glyphicon-folder-open"></span> &nbsp;
                        <a href="http://HarvestingClouds.com/category/azure-security">Azure Security</a>
                        &nbsp;&nbsp;

                    <span class="glyphicon glyphicon-bookmark"></span>

                        <a href="http://HarvestingClouds.com/tag/azue">azue</a>&nbsp;&nbsp;
                        <a href="http://HarvestingClouds.com/tag/azuresecurity">azuresecurity</a>&nbsp;&nbsp;
                        <a href="http://HarvestingClouds.com/tag/custompolicy">custompolicy</a>&nbsp;&nbsp;
                        <a href="http://HarvestingClouds.com/tag/microsoft">microsoft</a>&nbsp;&nbsp;
                        <a href="http://HarvestingClouds.com/tag/microsoftazure">microsoftazure</a>&nbsp;&nbsp;
                        <a href="http://HarvestingClouds.com/tag/policies">policies</a>&nbsp;&nbsp;
                        <a href="http://HarvestingClouds.com/tag/policy">policy</a>&nbsp;&nbsp;
                        <a href="http://HarvestingClouds.com/tag/security">security</a>&nbsp;&nbsp;
                </div>

            </article>
            <hr/>

            <div class="text-center clearfix">
                <div class="col-sm-4 col-md-4">
                    <a class="prevpost btn btn-primary"><i class="fa fa-chevron-circle-left"></i> Prev Post</a>
                </div>
                <div class="col-sm-4 col-md-4">
                    <a class="btn btn-primary" href="http://HarvestingClouds.com/posts.html"><i class="fa fa-navicon"></i> View All
                        Post</a>
                </div>
                <div class="col-sm-4 col-md-4">
                    <a class="nextpost btn btn-primary"><i class="fa fa-chevron-circle-right"></i> Next Post</a>
                </div>
            </div>

            <hr/>
            
            <!-- Comment form -->
            <div class="well">
                <div id="disqus_thread"></div>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">Comments
                    powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">Comments powered by
                    <span class="logo-disqus">Disqus</span></a>
            </div>

        </div>

        <div class="sidebar col-md-4">
        
            <!-- Follow Panel -->
                <div class="panel panel-primary text-center">
                    <div class="panel-heading">
                        <strong>Follow Me</strong>
                    </div>
        
                    <div class="panel-body">
                        <a target="_blank" href="http://HarvestingClouds.com/rss.xml" class="btn btn-social-icon btn-outline"><i class="fa fa-rss"></i></a>
        
                            <a target="_blank" href="https://twitter.com/20aman" class="btn btn-social-icon btn-twitter"><i class="fa fa-twitter"></i></a>
                            <a target="_blank" href="https://ca.linkedin.com/in/20aman" class="btn btn-social-icon btn-linkedin"><i class="fa fa-linkedin"></i></a>
                            <a target="_blank" href="https://github.com/HarvestingClouds" class="btn btn-social-icon btn-github"><i class="fa fa-github"></i></a>
                    </div>
                </div>
        
            <!-- Custom Values from Settings page -->
        
        <!-- Blog Series -->
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <strong>Key Posts and Series</strong>
                </div>
        
                <ul class="list-group">
                        <li class="list-group-item"><a href="https://www.amazon.com/dp/B07C8LSBSN" target="_blank">Book On Amazon - Quick and Practical Guide to ARM Templates</a></li>
                        <li class="list-group-item"><a href="http://harvestingclouds.com/post/demystifying-azure-security-series-index/">Demystifying Azure Security - Series</a></li>
                        <li class="list-group-item"><a href="http://harvestingclouds.com/post/step-by-step-azure-resource-manager-arm-templates-index/">Step by Step - Azure Resource Manager (ARM) Templates</a></li>
                        <li class="list-group-item"><a href="http://harvestingclouds.com/post/azure-site-recovery-asr-series-index/">Azure Site Recovery (ASR) - Series</a></li>
                </ul>
            </div>
        
        
            <!-- Latest Posts -->
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <strong>Latest Posts</strong>
                </div>
        
                <ul class="list-group">
                        <li class="list-group-item"><a href="http://HarvestingClouds.com/post/book-published-on-amazon-quick-and-practical-guide-to-arm-templates">Book published on Amazon - Quick and Practical Guide to ARM Templates</a></li>
                        <li class="list-group-item"><a href="http://HarvestingClouds.com/post/azure-site-recovery-asr-series-index">Azure Site Recovery (ASR) - Series Index</a></li>
                        <li class="list-group-item"><a href="http://HarvestingClouds.com/post/demystifying-azure-security-series-index">Demystifying Azure Security - Series Index</a></li>
                        <li class="list-group-item"><a href="http://HarvestingClouds.com/post/resources-new-azure-log-analytics-language-cheat-sheets">Resources - New Azure Log Analytics Language Cheat Sheets</a></li>
                        <li class="list-group-item"><a href="http://HarvestingClouds.com/post/demystifying-azure-security-custom-rbac-roles">Demystifying Azure Security - Custom RBAC Roles</a></li>
                </ul>
            </div>
        
            <!-- Categories -->
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <strong>Categories</strong>
                </div>
        
                <ul class="list-group">
                        <li class="list-group-item"><a href="http://HarvestingClouds.com/category/azure">Azure</a></li>
                        <li class="list-group-item"><a href="http://HarvestingClouds.com/category/azure-security">Azure Security</a></li>
                        <li class="list-group-item"><a href="http://HarvestingClouds.com/category/general">General</a></li>
                        <li class="list-group-item"><a href="http://HarvestingClouds.com/category/powershell">PowerShell</a></li>
                        <li class="list-group-item"><a href="http://HarvestingClouds.com/category/web-development">Web Development</a></li>
                </ul>
            </div>
        
            <!-- Archives -->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <strong>Archives</strong>
                    </div>
        
                    <ul class="archives list-group"><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/march-2018">March 2018</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/february-2018">February 2018</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/january-2018">January 2018</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/december-2017">December 2017</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/november-2017">November 2017</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/october-2017">October 2017</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/january-2017">January 2017</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/november-2016">November 2016</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/october-2016">October 2016</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/september-2016">September 2016</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/august-2016">August 2016</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/july-2016">July 2016</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/may-2016">May 2016</a></li><li class="list-group-item archive_link"><a href="http://HarvestingClouds.com/archive/april-2016">April 2016</a></li></ul>
                </div>
        
            <!-- Tags -->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <strong>Tags Cloud</strong>
                    </div>
        
                    <div class="panel-body">
                        <ul class="list-inline">
                            <a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/net" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">net</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/activedirectory" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">activedirectory</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/activedirectory" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">ActiveDirectory</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/ad" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">AD</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/ad" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">ad</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/analytics" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">analytics</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/announcement" title="3 total posts" data-original-title="4 total posts" data-toggle="tooltip">announcement</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/applicationinsights" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">ApplicationInsights</a>
<a style="font-size: 25px" class="tag_cloud" href="http://HarvestingClouds.com/tag/arm" title="22 total posts" data-original-title="23 total posts" data-toggle="tooltip">ARM</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/arm" title="4 total posts" data-original-title="5 total posts" data-toggle="tooltip">arm</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/armtemplates" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">armtemplates</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/asm" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">asm</a>
<a style="font-size: 14px" class="tag_cloud" href="http://HarvestingClouds.com/tag/asr" title="5 total posts" data-original-title="6 total posts" data-toggle="tooltip">ASR</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/asr" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">asr</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/automation" title="4 total posts" data-original-title="5 total posts" data-toggle="tooltip">automation</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/automation" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">Automation</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/azue" title="3 total posts" data-original-title="4 total posts" data-toggle="tooltip">azue</a>
<a style="font-size: 30px" class="tag_cloud" href="http://HarvestingClouds.com/tag/azure" title="29 total posts" data-original-title="30 total posts" data-toggle="tooltip">azure</a>
<a style="font-size: 30px" class="tag_cloud" href="http://HarvestingClouds.com/tag/azure" title="29 total posts" data-original-title="30 total posts" data-toggle="tooltip">Azure</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/azureautomation" title="4 total posts" data-original-title="5 total posts" data-toggle="tooltip">azureautomation</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/azurepolicies" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">azurepolicies</a>
<a style="font-size: 26px" class="tag_cloud" href="http://HarvestingClouds.com/tag/azureresourcemanager" title="24 total posts" data-original-title="25 total posts" data-toggle="tooltip">AzureResourceManager</a>
<a style="font-size: 16px" class="tag_cloud" href="http://HarvestingClouds.com/tag/azureresourcemanager" title="8 total posts" data-original-title="9 total posts" data-toggle="tooltip">azureresourcemanager</a>
<a style="font-size: 17px" class="tag_cloud" href="http://HarvestingClouds.com/tag/azuresecurity" title="9 total posts" data-original-title="10 total posts" data-toggle="tooltip">azuresecurity</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/azureservicemanagement" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">azureservicemanagement</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/azuresiterecovery" title="4 total posts" data-original-title="5 total posts" data-toggle="tooltip">AzureSiteRecovery</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/azuresiterecovery" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">azuresiterecovery</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/bash" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">bash</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/blob" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">blob</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/book" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">book</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/certifications" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">certifications</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/cloud" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">cloud</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/csharp" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">csharp</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/custom" title="3 total posts" data-original-title="4 total posts" data-toggle="tooltip">custom</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/custompolicy" title="3 total posts" data-original-title="4 total posts" data-toggle="tooltip">custompolicy</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/customroles" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">customroles</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/datacenter" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">datacenter</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/dsc" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">dsc</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/ebook" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">ebook</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/general" title="3 total posts" data-original-title="4 total posts" data-toggle="tooltip">general</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/gridmvc" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">gridmvc</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/json" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">JSON</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/keyvault" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">KeyVault</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/language" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">language</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/log" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">log</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/loganalytics" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">loganalytics</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/manageddisks" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">manageddisks</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/mcsa" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">mcsa</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/mcsd" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">mcsd</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/mcse" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">mcse</a>
<a style="font-size: 22px" class="tag_cloud" href="http://HarvestingClouds.com/tag/microsoft" title="18 total posts" data-original-title="19 total posts" data-toggle="tooltip">microsoft</a>
<a style="font-size: 22px" class="tag_cloud" href="http://HarvestingClouds.com/tag/microsoftazure" title="17 total posts" data-original-title="18 total posts" data-toggle="tooltip">microsoftazure</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/mvc" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">mvc</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/oms" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">oms</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/policies" title="4 total posts" data-original-title="5 total posts" data-toggle="tooltip">policies</a>
<a style="font-size: 14px" class="tag_cloud" href="http://HarvestingClouds.com/tag/policy" title="5 total posts" data-original-title="6 total posts" data-toggle="tooltip">policy</a>
<a style="font-size: 15px" class="tag_cloud" href="http://HarvestingClouds.com/tag/powershell" title="6 total posts" data-original-title="7 total posts" data-toggle="tooltip">powershell</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/powershell" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">PowerShell</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/query" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">query</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/querylanguage" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">querylanguage</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/remoteapp" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">RemoteApp</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/reservedinstances" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">reservedinstances</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/resourcegroups" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">ResourceGroups</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/roles" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">roles</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/runbooks" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">Runbooks</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/sample" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">Sample</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/script" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">Script</a>
<a style="font-size: 17px" class="tag_cloud" href="http://HarvestingClouds.com/tag/security" title="9 total posts" data-original-title="10 total posts" data-toggle="tooltip">security</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/shell" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">shell</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/storage" title="3 total posts" data-original-title="4 total posts" data-toggle="tooltip">storage</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/tags" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">Tags</a>
<a style="font-size: 24px" class="tag_cloud" href="http://HarvestingClouds.com/tag/templates" title="20 total posts" data-original-title="21 total posts" data-toggle="tooltip">Templates</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/templates" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">templates</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/troubleshooting" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">troubleshooting</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/virtualmachine" title="3 total posts" data-original-title="4 total posts" data-toggle="tooltip">virtualmachine</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/visualstudio" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">VisualStudio</a>
<a style="font-size: 13px" class="tag_cloud" href="http://HarvestingClouds.com/tag/vm" title="3 total posts" data-original-title="4 total posts" data-toggle="tooltip">vm</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/vmware" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">VMWare</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/webdevelopment" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">webdevelopment</a>
<a style="font-size: 12px" class="tag_cloud" href="http://HarvestingClouds.com/tag/windows" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">windows</a>

                        </ul>
                    </div>
                </div>
            </div>

    </div>
</div>

<!-- Footer -->
<footer>
    <div class="container">
        <hr/>
        <p class="text-center">&copy; <script> document.write( new Date().getFullYear()) </script> <strong><a href="http://HarvestingClouds.com">Harvesting Clouds</a></strong></p>
    </div>
</footer>

<!-- Jquery and Bootstrap Script files -->
<script src="http://HarvestingClouds.com/js/jquery-2.0.3.min.js"></script>
<script src="http://HarvestingClouds.com/js/plugins/bootstrap-3.0.3/js/bootstrap.min.js"></script>
<script src="http://HarvestingClouds.com/js/plugins/highlight/highlight.pack.js"></script>
<script src="http://HarvestingClouds.com/js/plugins/lightbox/ekko-lightbox.min.js"></script>

<script>
    var __blogURL = 'http://HarvestingClouds.com';
</script>

<script src="http://HarvestingClouds.com/js/blog.js"></script>
<script src="http://HarvestingClouds.com/js/search.js"></script>

<!-- google analytics -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-75855204-1', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>
<!-- for pagination -->
<script>
    $(function () {

        ///////////////////////////////////////////////////
        // class/id/selector of prev link
        var $prevPostSelector = $('.prevpost');
        var $nextPostSelector = $('.nextpost');
        ///////////////////////////////////////////////////

        var pageArray = document.location.href.split('/');
        var currentPageSlug = pageArray[pageArray.length - 1];

        if (!currentPageSlug) {
            currentPageSlug = pageArray[pageArray.length - 2];
        }

        $.ajax({
            url: __blogURL + "/data/blog.json",
            type: "GET",
            dataType: "json",
            success: function (data) {
                if (data.posts !== undefined && data.posts !== null) {
                    $.each(data.posts, function (i, post) {
                        if (post.slug === currentPageSlug || post.slug + '/' === currentPageSlug) {

                            var prevPost = data.posts[i - 1];
                            var nextPost = data.posts[i + 1];

                            if (prevPost === undefined || prevPost === null) {
                                // hide previous link if it is first post
                                $prevPostSelector.hide();
                            }
                            else {
                                $prevPostSelector.attr('href', __blogURL + '/post/' + prevPost.slug);
                            }

                            if (nextPost === undefined || nextPost === null) {
                                // hide previous link if it is last post
                                $nextPostSelector.hide();
                            }
                            else {
                                $nextPostSelector.attr('href', __blogURL + '/post/' + nextPost.slug);
                            }

                            return false; // break out of each
                        }
                    });
                }
            },
            error: function (e) {
                $prevPostSelector.hide();
                $nextPostSelector.hide();
            }
        });

        // for Disqus
        var disqus_shortname = 'harvestingclouds';
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

    });
</script>
